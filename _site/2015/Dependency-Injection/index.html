<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en" prefix="og: http://ogp.me/ns#"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en" prefix="og: http://ogp.me/ns#"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns#"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" prefix="og: http://ogp.me/ns#"> <!--<![endif]-->
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="GitHub Pages" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

  <title>Dependency Injection - FullOuterJoin</title>

  
  <meta name="title" content="Dependency Injection" />
  <meta property="og:title" content="Dependency Injection" />
  <meta name="description" content="Don't create, do inject" />
  <meta property="og:description" content="Don't create, do inject" />
  <meta property="og:site_name" content="FullOuterJoin" />
  <meta property="og:image" content="" />
  
  <meta name="author" content="vishnu" />

  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <link rel="stylesheet" type="text/css" href="/css/libs/jquery.qtip.min.css" />

  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <link rel="stylesheet" type="text/css" href="/css/syntax.css" /><!-- syntax highlighting -->
  <!--[if IE]>
      <link rel="stylesheet" type="text/css" href="/css/ie.css" />
  <![endif]-->

  <script src="/js/libs/modernizr-2.5.3.min.js"></script>
</head>

<body>

  <div id="container">
    <aside id="topbar">
      <div class="inner">
        <h1><a href="/">FullOuterJoin</a></h1>

        <ul id="quick-links">
          <li><a href="/">home</a></li>
          <li><a href="/about.html">about</a></li>
        </ul>
      </div>
    </aside>

    <section id="main" role="main">
      <div class="inner">
        <article id="single" class="hentry">
    <header>
        <h1 class="entry-title">
            
            Dependency Injection
            
        </h1>
        <time datetime="2015-05-20T00:00:00+05:30">
            20 May 2015
        </time>
    </header>

    <div class="entry-content">
        <p>When I was doing my first project in my TWU(ThoughtWorks University) we were building a webapp and we used Spring framework. I would have heard the word ‘dependency injection’ 100 times/day. When I started out, I didn’t know anything about it. I thought it must be some complicated thing because of its hip name. But later I found out it is so simple, yet so powerful.</p>

<p>Let’s say we have a component Car and that needs(depends an engine)  Engine. We would normally create a Car with Engine and all the logic of creation of the Engine goes inside the Car. The Engine could be a complex component by itself having dependency on something else like fuel.</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Engine</span> <span class="o">{</span>
 <span class="kd">private</span> <span class="n">String</span> <span class="n">type</span><span class="o">;</span>
 <span class="kd">private</span> <span class="kt">int</span> <span class="n">horsePower</span><span class="o">;</span>
 <span class="kd">private</span> <span class="kt">int</span> <span class="n">valve</span><span class="o">;</span>

<span class="kd">public</span> <span class="nf">Engine</span><span class="o">(</span><span class="n">String</span> <span class="n">type</span><span class="o">,</span> <span class="kt">int</span> <span class="n">horsePower</span><span class="o">,</span> <span class="kt">int</span> <span class="n">valve</span><span class="o">)</span> <span class="o">{</span>
 <span class="k">this</span><span class="o">.</span><span class="na">type</span> <span class="o">=</span> <span class="n">type</span><span class="o">;</span>
 <span class="k">this</span><span class="o">.</span><span class="na">horsePower</span> <span class="o">=</span> <span class="n">horsePower</span><span class="o">;</span>
 <span class="k">this</span><span class="o">.</span><span class="na">valve</span> <span class="o">=</span> <span class="n">valve</span><span class="o">;</span>
 <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Car</span> <span class="o">{</span>
 <span class="n">Engine</span> <span class="n">engine</span><span class="o">;</span>

<span class="kd">public</span> <span class="nf">Car</span><span class="o">()</span> <span class="o">{</span>
 <span class="n">engine</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Engine</span><span class="o">(</span><span class="s">&quot;flat&quot;</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
 <span class="o">}</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">drive</span><span class="o">()</span> <span class="o">{</span>
 <span class="c1">//some drive logic using engine</span>
 <span class="o">}</span>
<span class="o">}</span></code></pre></div>

<p>We create a Car with an Engine which has a set of properties. And we can start instantiating Car and get as many cars as we want.</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
 <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
 <span class="n">Car</span> <span class="n">car</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Car</span><span class="o">();</span>
 <span class="n">car</span><span class="o">.</span><span class="na">drive</span><span class="o">();</span>
 <span class="o">}</span>
<span class="o">}</span></code></pre></div>

<p>But now our Car is tightly coupled with Engine, so if the implementation of the engine changes then our car would break. We would not want that to happen. And you have to change the Car’s code if you wanted to create a car with a different Engine say a V8Engine.</p>

<p>Let’s see how Dependency injection would solve our problem. Instead of creating an Engine inside the Car, inject it.</p>

<p>Don’t Create. Do Inject.</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
 <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
 <span class="n">Engine</span> <span class="n">engine</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Engine</span><span class="o">(</span><span class="s">&quot;V-type&quot;</span><span class="o">,</span> <span class="mi">200</span><span class="o">,</span> <span class="mi">8</span><span class="o">);</span>
 <span class="n">Car</span> <span class="n">car</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Car</span><span class="o">(</span><span class="n">engine</span><span class="o">);</span>
 <span class="n">car</span><span class="o">.</span><span class="na">drive</span><span class="o">();</span>
 <span class="o">}</span>
<span class="o">}</span></code></pre></div>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Car</span> <span class="o">{</span>
 <span class="n">Engine</span> <span class="n">engine</span><span class="o">;</span>

<span class="kd">public</span> <span class="nf">Car</span><span class="o">(</span><span class="n">Engine</span> <span class="n">engine</span><span class="o">)</span> <span class="o">{</span>
 <span class="k">this</span><span class="o">.</span><span class="na">engine</span> <span class="o">=</span> <span class="n">engine</span><span class="o">;</span>
 <span class="o">}</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">drive</span><span class="o">()</span> <span class="o">{</span>
 <span class="c1">//some drive logic</span>
 <span class="o">}</span>
<span class="o">}</span></code></pre></div>

<p>So we can create all types of engine and pass it to the Car and the car would not have to be modified. So we have loosely coupled Car and Engine by removing the dependency of Car on Engine. This is a manual way to inject dependencies. But we can use Containers like spring to manage dependencies and inject them when ever someone needs it. So where ever Car needs some engine it would inject it. And that takes care of transitive dependencies also.</p>

<p>So when we are building multi tier architectural software, there would be a service which would need to use a DAO(Data Access Objects) and if we have tight coupling over it, we would have to change the service every time the type of database changes. So we use dependency injection to inject the required DAO Implementation.</p>

<p>And it would be very advisable to <a href="https://vishnukarthikl.github.io/2015/Coding-to-Interfaces/">Code to Interface</a>. So we can just ask for a Type rather than a concrete instance. It would be helpful to test also. We can inject mock objects during unit tests. Otherwise it is not even a unit test. So when we test a service we would not be actually making db calls, we would be mainly testing the service’s logic and not how we get the data. So we can inject a mock repository as a DAO to it. We shall be looking into what mocks are in future posts.</p>

<p>There are several frameworks which does a great job at making dependency injection easy. I really like AngularJs’ (client side MVC), dependency injection mechanism. It helps me to separate logical components as services and inject them whenever I need then.</p>

<p>So It is best to Code to Interface and use Dependency Injection to reduce the coupling between components. Remove as much coupling as you can because having tightly coupled software would just be so not cool. Making some changes to a component will result in cascade of modification to its dependent components. If it is loosely coupled i.e no dependencies managed by that component, then we can contain the changes to that single component.</p>


    </div>
</article>


<div id="related">
    <h2>Related Posts</h2>
    <ul class="posts">
        
        <li><span>10 May 2015</span> &raquo; <a href="/2015/Coding-to-Interfaces/">Coding to Interfaces</a></li>
        
        <li><span>29 Apr 2015</span> &raquo; <a href="/2015/Perils-of-Mutability/">Perils of Mutability</a></li>
        
        <li><span>03 Apr 2015</span> &raquo; <a href="/2015/Pass-by-Value-or-Reference/">Pass by Value or Reference</a></li>
        
    </ul>
</div>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'fullouterjoin';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

        <footer>
	        <div class="vcard">
            <a class="email fn n" href="mailto: vishnu.carbon@gmail.com">
              <span class="given-name">vishnu</span>
            </a> &mdash; <span class="adr">
              <span class="locality">Coimbatore</span>, <span class="region">Tamil Nadu</span>
            </span>
	        </div>
        </footer>
      </div>
    </section>
  </div>

  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery/1.8.3/jquery-1.8.3.min.js"></script>
  <script type="text/javascript" src="/js/libs/jquery.qtip.min.js"></script>
  <script type="text/javascript" src="/js/script.js"></script>

</body>
</html>
